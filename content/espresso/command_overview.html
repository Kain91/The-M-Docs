<!-- HEADER -->
<div class="contentHeader">
    <a name="top"></a>

    <h1>Espresso Command Overview</h1>

    <div class="directoryPath">
        Learn how to use the different commands that Espresso offers.
	</div>

    <!--<span class="navlink" onclick="scroll('basics')">Basics</span> &#183;
    <span class="navlink" onclick="scroll('tmp_mvc')">MVC and TMP</span> &#183;
    <span class="navlink" onclick="scroll('incluence')">How does MVC influence app development with The-M-Project?</span>-->
</div>
<!-- END OF HEADER -->
<div id="post-969" class="post-969 post type-post status-draft format-standard hentry category-uncategorized">
    <div class="entry-content">
        <p class="text">Espresso is the development and build tool for The-M-Project. It&#8217;s a commandline tool based on node.js.
            Starting Espresso means running the Espresso/bin/espresso.js file as a node process.</p>
        <blockquote>

            <div class="note text">Do you have installed node.js already? navigate in your favorite command line tool to
            path/to/Espresso/bin/espresso.js and press enter &#8211; Horray you just started Espresso. If you often use
            espresso, and I think you will, I recommend to set an alias to the espresso.js file.</div></blockquote>
        <p class="text">If you start Espresso without a parameter by default all available commands (<a href="#build">build</a>, <a
                href="#deploy">deploy</a>, <a href="#generate">generate</a>, <a href="#init">init</a>, <a
                href="#package">package</a>, <a href="#server">server</a>, <a href="#version">version</a>, <a
                href="#help">help</a>) will be prompt. The following overview is based on version 0.8 and lists all
            espresso commands and their options.</p>

        <p class="text"><strong><a name="build">build</a></strong><br/>
            Command to build a project</p>
        <ul>
            <li>-d, –directory=DIRECTORY Specify a custom project directory Default: $PWD</li>
        </ul>
        <p class="text"><strong><a name="deploy">deploy</a></strong><br/>
            Command deploy projects</p>
        <ul>
            <li>-d, –directory=DIRECTORY Specify a custom project directory Default: $PWD</li>
        </ul>
        <p class="text"><strong><a name="generate">generate</a></strong><br/>
            Command to generate new or additional files for a project</p>
        <ul>
            <li>-d, –directory=DIRECTORY Specify a custom project directory Default: $PWD</li>
            <li>-m, –model=MODEL Create a new model</li>
            <li>-c, –controller=CONTROLLER Create a new controller</li>
            <li>-v, –view=VIEW Create a new page</li>
            <li>-x, –validator=VALIDATOR Create a new validator</li>
            <li>-i, –i18n Create a new i18n files</li>
            <li>-t, –target Create a new “targets.json” sample file</li>
        </ul>
        <p class="text"><strong><a name="init">init</a></strong><br/>
            Command line tool to generate a new project</p>
        <ul>
            <li>-p, &#8211;project=PROJECT Project name</li>
            <li>-d, &#8211;directory=DIRECTORY Specify a custom projects directory Default: $PWD</li>
            <li>-e, &#8211;example Generate an example &#8220;Hello World&#8221; application Default: false</li>
        </ul>
        <p class="text"><strong><a name="package">package</a></strong><br/>
            Command to build native applications</p>
        <ul>
            <li>-d, &#8211;directory=DIRECTORY Specify a custom project directory Default: $PWD</li>
        </ul>
        <p class="text"><strong><a name="server">server</a></strong><br/>
            Command to run the Development server</p>
        <ul>
            <li>-m, &#8211;manifest Start the server in manifest mode. Enable generation of cache.manifest Default:
                false
            </li>
            <li>-c, &#8211;config=CONFIG Specify a custom config</li>
            <li>-d, &#8211;directory=DIRECTORY Specify a custom project directory Default: $PWD</li>
            <li>-p, &#8211;port=PORT Specify a custom port Default: 8000</li>
        </ul>
        <p class="text"><strong><a name="version">version</a></strong><br/>
            Command to print the Espresso version</p>

        <p class="text"><strong><a name="help">help</a></strong><br/>
            Command to show help for a subcommand</p>

        <p class="text">Every command has it&#8217;s own help option using -h with it.</p>

        <p class="text"><strong>How Espresso fulfils your needs</strong><br/>
            Now that you have a Espresso spec id like to show you a few examples how to use it. If you&#8217;d like you
            can call it an best practice on how to use Espresso.</p>

        <p class="text">Assuming you&#8217;d like to build a The-M-Project App called EspressoShowcase. So you have to initialize the
            Application by calling Espresso init with the name for your project. Espresso makes a new folder named after
            the -p option. In the project root Espresso made the <a
                    href="https://github.com/mwaylabs/Espresso/wiki/Config.json">config.json file</a>, the frameworks
            folder with all required files for The-M-Project and the app folder. The app folder is the root directory
            for all app required stuff like controllers, views, models, images, stylesheets and stuff like that. In
            short: frameworks is for The-M-Project and the app folder is for you.</p>
<pre class="brush: jscript; title: ; notranslate" title="">espresso init -p EspressoShowcase
cd EspressoShowcase
</pre>
        <p class="text">You just setup an The-M-Project App. This means you can run it. Try it with:</p>
        <pre class="brush: jscript; title: ; notranslate" title="">espresso server</pre>
        <p class="text">We designed Espresso to give you a feedback with stuff you could do with it or what Espresso is just doing.
            So Espresso should now say to you:</p>
        <pre class="brush: plain; title: ; notranslate" title="">LOG: Server running at http://127.0.0.1:8000/EspressoShowcase</pre>
        <p class="text">If you open the URL in your Browser, you will see your running app and Espresso prints a lot of information
            to your command line. If Espresso runs into Errors, Espresso will tell you. Sometime you get this error when
            you&#8217;ve a lot of different apps running:</p>
        <pre class="brush: plain; title: ; notranslate" title="">Error: listen EADDRINUSE</pre>
        <p class="text">this only means that the current port (default 8000) is already in use. Just use another one with the -p
            option</p>
        <pre class="brush: jscript; title: ; notranslate" title="">espresso server -p 8800</pre>
        <p class="text">Back to business. Your current running app is a little bit boring? No views, no interaction, no anything. Don&#8217;t
            panic! Just generate them! (by the way: to stop espresso you can press ctrl+c)<br/>
            To generate a View named &#8216;StartView&#8217; run this command:</p>
        <pre class="brush: jscript; title: ; notranslate" title="">espresso generate -v StartView</pre>
        <p class="text">If you&#8217;ve forgotten how the command looks like in particular just run Espresso with a incomplete
            command and Espresso will tell you how the command should look like.<br/>
            In our opinion every view should have their own controller.</p>
        <pre class="brush: jscript; title: ; notranslate" title="">espresso generate -c StartController</pre>
        <p class="text">Espresso generated a View and a Controller. You should now have a similar app folder structure:</p>
        <ul>
            <li>app
                <ul>
                    <li>main.js</li>
                    <li>views
                        <ul>
                            <li>StartView.js</li>
                        </ul>
                    </li>
                    <li>controllers:
                        <ul>
                            <li>StartController.js</li>
                        </ul>
                    </li>
                    <li>resources
                        <ul>
                            <li>base
                                <ul>
                                    <li>images
                                        <ul>
                                            <li>Icon-72.png</li>
                                            <li>Icon.png</li>
                                            <li>Icon@2x.png</li>
                                        </ul>
                                    </li>
                                    <li>style.css</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <p class="text">let your creativity go wild and code for all one&#8217;s worth. After you finished and your app runs pretty
            well under construction mode (espresso server). Eventually you want to show it to a friend of yours. Now you
            have a view options doing that. (1) Build you application and upload it to an server or (2) use Espressos
            build-in tool.</p>
        <pre class="brush: plain; title: ; notranslate" title="">espresso build</pre>
        <p class="text">In you&#8217;re project root folder should now be a &#8216;build&#8217; folder with all builds you&#8217;ve
            made. Every build is named after the timestamp it was created on.</p>

        <p class="text">Building an app has 2 interesting features which can be set in the config.json file &#8211; eliminate and
            minify. Both take true or false (boolean) as property and you find <a
                    href="https://github.com/mwaylabs/Espresso/wiki/Config.json">the description here</a>.</p>

        <p class="text">Because your builded The-M-Project App is only HTML, CSS and JavaScript it runs on every standard web server.
            So upload it via curl or ftp to your server, rename it (because of the 1236136472348 timestamp name) and
            enjoy. OR just use</p>
        <pre class="brush: plain; title: ; notranslate" title="">espresso deploy</pre>
        <p class="text">With no further configuration it&#8217;ll do the same as the build process. So again, have a look at the <a
                href="https://github.com/mwaylabs/Espresso/wiki/Config.json">config.json file</a>. Especially at the
            &#8220;defaultDeployTarget&#8221; and &#8220;deploy&#8221; settings. These two are necassary to get your
            deploy up and running. Also the deploy options are described very well at the config.json documentation
            page. To go on I used an FTP server to deploy my app to. And my config looked like this:</p>
<pre class="brush: plain; title: ; notranslate" title="">&quot;defaultDeployTarget&quot;: &quot;tmp-server&quot;,
&quot;deploy&quot;: {
    &quot;tmp-server&quot;: {
        &quot;method&quot;: &quot;ftp&quot;,
        &quot;ftp&quot;: {
            &quot;host&quot;: &quot;the-m-project.org&quot;,
            &quot;port&quot;: 21,
            &quot;username&quot;: &quot;tmp-admin&quot;,
            &quot;password&quot;: &quot;tmpSecretPassword&quot;,
            &quot;targetPath&quot;: &quot;/apps/samples/EspressoShowcase&quot;,
            &quot;debugLevel&quot;: 1
        }
    }
}</pre>
        <p class="text">As default server (currently the only one) I defined the tmp-server. As you see it is defined under the
            deploy object as well. This key is the reference to the defaultDeployTarget. Then, as I mentioned above, ftp
            is the protocol of my choice. It&#8217;s also required to set a port, username and password. I prefer to set
            the debugLevel to 1. This means Espresso will tell me what he&#8217;s doing. You can set it to 0 for a quiet
            mode. Also look at your targetPath and be sure to set it to an empty folder. Espresso will delete all files
            in it and then publish your app in it. Espresso deploy uploads directly the generated files without creating
            a folder. Now the app should be running on you webserver and you can share your app with you friends.</p>

        <p class="text">Consider this: One of your friends likes your app very much and wants to have a native version for his
            Android/iPhone. Awesome! And no problem with Espresso. Just use</p>
        <pre class="brush: plain; title: ; notranslate" title="">espresso package</pre>
        <p class="text">and everything will be fine.<br/>
            As with every command, Espresso could not guess what you like to do. So back to the <a
                    href="https://github.com/mwaylabs/Espresso/wiki/Config.json">config.json file</a>.</p>

        <p class="text">TODO EXPLAIN:<br/>
            - PHONEGAP PACKAGE CONFIGURATION<br/>
            - PHONEGAP/ANDROID CONFIGURATION<br/>
            - PHONEGAP/IOS CONFIGURATION</p>

